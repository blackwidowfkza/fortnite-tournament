<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FKZA Duo Cash Cup</title>
 37  <meta name="theme-color" content="#1f6feb" />
  <meta property="og:title" content="FKZA Duo Cash Cup" />
  <meta property="og:description" content="Join the FKZA Duo Cash Cup - Register and Compete!" />
  <meta property="og:image" content="https://i.ibb.co/FbL2kmSn/Untitled-design-1.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" href="https://i.ibb.co/FbL2kmSn/Untitled-design-1.png" type="image/png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.15/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;500;700&display=swap');

    :root {
      --neon-blue: #00f0ff;
      --neon-pink: #ff00ff;
      --neon-green: #00ff00;
      --bg-dark: #0a0e17;
      --bg-card: #1a1e2b;
      --text-primary: #e0e6ff;
      --text-secondary: #a0a6c0;
      --shadow-glow: 0 0 15px rgba(0, 240, 255, 0.3);
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, var(--bg-dark), #141825);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    .neon-glow {
      box-shadow: var(--shadow-glow);
      transition: all 0.3s ease;
    }

    .neon-glow:hover {
      box-shadow: 0 0 25px rgba(0, 240, 255, 0.5);
      transform: translateY(-2px);
    }

    .animate-pulse-slow {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .orbitron {
      font-family: 'Orbitron', sans-serif;
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top-color: var(--neon-blue);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const CONFIG = {
      SCRIPT_URL: "https://fkza-proxy.onrender.com/register",
      MAX_TEAMS: 20,
      TOURNAMENT_DATE: "2025-05-31T17:00:00+02:00"
    };

    const App = () => {
      const [registrations, setRegistrations] = React.useState([]);
      const [countdown, setCountdown] = React.useState('Loading...');
      const [isLoading, setIsLoading] = React.useState(false);
      const [error, setError] = React.useState('');
      const [success, setSuccess] = React.useState('');
      const [collapsedSections, setCollapsedSections] = React.useState({
        details: window.innerWidth <= 768,
        registration: window.innerWidth <= 768,
        register: window.innerWidth <= 768,
        teams: window.innerWidth <= 768,
        prize: window.innerWidth <= 768,
        scoring: window.innerWidth <= 768,
        rules: window.innerWidth <= 768,
        support: window.innerWidth <= 768,
      });

      React.useEffect(() => {
        initCountdown();
        fetchRegistrations();
      }, []);

      const initCountdown = () => {
        const updateCountdown = () => {
          const eventDate = new Date(CONFIG.TOURNAMENT_DATE);
          const now = new Date();
          const diff = eventDate - now;

          if (diff <= 0) {
            setCountdown('The tournament is live!');
            return;
          }

          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
          const minutes = Math.floor((diff / 1000 / 60) % 60);
          const seconds = Math.floor((diff / 1000) % 60);
          setCountdown(`${days}d ${hours}h ${minutes}m ${seconds}s`);
        };

        updateCountdown();
        const interval = setInterval(updateCountdown, 1000);
        return () => clearInterval(interval);
      };

      const fetchRegistrations = async () => {
        try {
          const response = await fetch(`${CONFIG.SCRIPT_URL}?action=get`, {
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
          });
          if (!response.ok) throw new Error(`HTTP error ${response.status}`);
          const { registrations, error } = await response.json();
          if (error) throw new Error(error);
          setRegistrations(registrations || []);
        } catch (err) {
          setError(getUserFriendlyError(err));
        }
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        const player = e.target.player.value.trim();
        const duo = e.target.duo.value.trim();

        if (!validateInput(player, duo)) return;

        setIsLoading(true);
        setError('');
        setSuccess('');

        try {
          const response = await fetch(CONFIG.SCRIPT_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ player, duo }),
          });
          const result = await response.json();

          if (result.success) {
            await fetch('https://fkza-proxy.onrender.com/notify', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ player, duo }),
            });
            setSuccess(`‚úÖ Success! Your team is registered as Team ${result.teamId}. Now complete verification in Discord.`);
            e.target.reset();
            fetchRegistrations();
          } else {
            throw new Error(result.message || 'Registration failed');
          }
        } catch (err) {
          setError(getUserFriendlyError(err));
        } finally {
          setIsLoading(false);
        }
      };

      const validateInput = (player, duo) => {
        if (!‰ø°ÊÅØËØ∑ÂâçÂæÄ https://x.ai/api ‰∫ÜËß£ËØ¶ÊÉÖ„ÄÇ player || !duo) {
          setError('‚ùå Please fill in both Discord usernames');
          return false;
        }
        if (player === duo) {
          setError("‚ùå You can't team with yourself");
          return false;
        }
        if (player.length < 3 || duo.length < 3) {
          setError('‚ùå Usernames must be at least 3 characters');
          return false;
        }
        return true;
      };

      const getUserFriendlyError = (error) => {
        const msg = error.message || String(error);
        if (msg.includes('Failed to fetch')) {
          return 'Network blocked. Try:\n1. Disabling ad-blockers\n2. Using Chrome with CORS extension\n3. Incognito mode';
        }
        if (msg.includes('timed out')) {
          return 'Server is busy. Please try again later.';
        }
        return msg;
      };

      const toggleSection = (section) => {
        setCollapsedSections((prev) => ({
          ...prev,
          [section]: !prev[section],
        }));
      };

      const remainingSpots = CONFIG.MAX_TEAMS - registrations.length;

      return (
        <div className="min-h-screen flex flex-col">
          <header className="text-center py-8 bg-[var(--bg-card)] border-b border-[var(--neon-blue)]/20">
            <img
              src="https://i.ibb.co/FbL2kmSn/Untitled-design-1.png"
              alt="FKZA Logo"
              className="mx-auto h-32 rounded-lg border-2 border-[var(--neon-blue)] neon-glow"
            />
            <h1 className="text-4xl md:text-5xl orbitron font-bold mt-4 text-[var(--neon-blue)] animate-pulse-slow">
              FKZA Duo Cash Cup
            </h1>
            <div className="text-xl md:text-2xl text-[var(--neon-pink)] orbitron mt-2">{countdown}</div>
            <div className="text-lg text-[var(--neon-green)] font-semibold mt-2">
              {remainingSpots > 0 ? remainingSpots : 0} of {CONFIG.MAX_TEAMS} spots left
            </div>
          </header>

          <main className="flex-1 max-w-6xl mx-auto p-4 md:p-8">
            <Section
              title="üìÖ Tournament Details"
              isCollapsed={collapsedSections.details}
              toggle={() => toggleSection('details')}
            >
              <ul className="space-y-2 text-[var(--text-secondary)]">
                <li><strong>Date & Time:</strong> 31st May 2025, 7PM SAST</li>
                <li><strong>Format:</strong> Duos (20 teams max)</li>
                <li><strong>Game Mode:</strong> Reload Zero Builds</li>
                <li><strong>Server:</strong> Europe (EU)</li>
                <li><strong>Duration:</strong> 3 hours (6 matches)</li>
              </ul>
            </Section>

            <Section
              title="üì• Complete Your Registration"
              isCollapsed={collapsedSections.registration}
              toggle={() => toggleSection('registration')}
            >
              <div className="space-y-4">
                {[
                  { number: 1, text: 'Register your team in the below section - Fill in both players\' Discord usernames' },
                  { number: 2, text: <span>Join our Discord server: <a href="https://discord.gg/PC5ArHu6" target="_blank" className="text-[var(--neon-blue)] hover:underline">discord.gg/PC5ArHu6</a></span> },
                  { number: 3, text: <span>Go to the <code className="bg-[var(--bg-card)] text-[var(--neon-blue)] px-1 rounded"> #verify</code> channel and link your Epic account</span> },
                  { number: 4, text: 'Both players must complete verification to confirm your spot in the tournament' },
                ].map((step) => (
                  <div key={step.number} className="flex items-start gap-4 p-4 bg-[var(--bg-card)] rounded-lg border-l-4 border-[var(--neon-blue)]">
                    <div className="bg-[var(--neon-blue)] text-[var(--bg-dark)] w-6 h-6 rounded-full flex items-center justify-center font-bold">{step.number}</div>
                    <div>{step.text}</div>
                  </div>
                ))}
                <p className="text-[var(--neon-green)]"><strong>Note:</strong> Your registration is only complete after both players verify in Discord.</p>
              </div>
            </Section>

            {remainingSpots > 0 ? (
              <Section
                title="üìù Register Your Duo"
                isCollapsed={collapsedSections.register}
                toggle={() => toggleSection('register')}
              >
                <form onSubmit={handleSubmit} className="space-y-4">
                  <div>
                    <label className="block text-[var(--neon-blue)] font-medium">Your Discord Username:</label>
                    <input
                      id="player"
                      type="text"
                      placeholder="e.g. Player123"
                      required
                      className="w-full p-3 mt-1 bg-[var(--bg-card)] text-[var(--text-primary)] rounded-lg border border-[var(--neon-blue)]/30 focus:outline-none focus:ring-2 focus:ring-[var(--neon-blue)]"
                    />
                  </div>
                  <div>
                    <label className="block text-[var(--neon-blue)] font-medium">Your Duo Partner's Discord Username:</label>
                    <input
                      id="duo"
                      type="text"
                      placeholder="e.g. DuoPartner456"
                      required
                      className="w-full p-3 mt-1 bg-[var(--bg-card)] text-[var(--text-primary)] rounded-lg border border-[var(--neon-blue)]/30 focus:outline-none focus:ring-2 focus:ring-[var(--neon-blue)]"
                    />
                  </div>
                  <button
                    type="submit"
                    disabled={isLoading}
                    className="w-full p-3 bg-[var(--neon-green)] text-[var(--bg-dark)] font-bold rounded-lg neon-glow flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    <span>{isLoading ? 'Processing...' : 'Register Your Team'}</span>
                    {isLoading && <span className="spinner"></span>}
                  </button>
                </form>
                {error && <div className="mt-4 p-3 bg-red-500/20 text-red-400 rounded-lg">{error}</div>}
                {success && <div className="mt-4 p-3 bg-green-500/20 text-[var(--neon-green)] rounded-lg">{success}</div>}
              </Section>
            ) : (
              <div className="p-4 bg-red-500/20 text-red-400 rounded-lg text-center neon-glow">
                <p>üö® Tournament registrations are now closed!</p>
                <p>Maximum of {CONFIG.MAX_TEAMS} teams has been reached.</p>
              </div>
            )}

            <Section
              title="üèÜ Registered Teams"
              isCollapsed={collapsedSections.teams}
              toggle={() => toggleSection('teams')}
            >
              <div className="overflow-x-auto">
                <table className="w-full bg-[var(--bg-card)] rounded-lg">
                  <thead>
                    <tr className="bg-[var(--neon-blue)]/10">
                      <th className="p-3 text-left text-[var(--neon-blue)]">Team ID</th>
                      <th className="p-3 text-left text-[var(--neon-blue)]">Player 1</th>
                      <th className="p-3 text-left text-[var(--neon-blue)]">Player 2</th>
                    </tr>
                  </thead>
                  <tbody>
                    {registrations.length === 0 ? (
                      <tr><td colSpan="3" className="p-3 text-center">No teams registered yet</td></tr>
                    ) : (
                      registrations.slice(0, CONFIG.MAX_TEAMS).map((team) => (
                        <tr key={team.id} className="hover:bg-[var(--neon-blue)]/5">
                          <td className="p-3">{team.id}</td>
                          <td className="p-3">{team.player}</td>
                          <td className="p-3">{team.duo}</td>
                        </tr>
                      ))
                    )}
                  </tbody>
                </table>
              </div>
              <p className="mt-4 text-[var(--neon-green)] text-center">
                Spots remaining: <strong>{remainingSpots > 0 ? remainingSpots : 0}</strong>/{CONFIG.MAX_TEAMS}
                {remainingSpots <= 0 ? ' (Tournament full)' : ''}
              </p>
            </Section>

            <Section
              title="üí∞ Prize Pool"
              isCollapsed={collapsedSections.prize}
              toggle={() => toggleSection('prize')}
            >
              <table className="w-full bg-[var(--bg-card)] rounded-lg">
                <thead>
                  <tr className="bg-[var(--neon-blue)]/10">
                    <th className="p-3 text-left text-[var(--neon-blue)]">Placement</th>
                    <th className="p-3 text-left text-[var(--neon-blue)]">Prize</th>
                  </tr>
                </thead>
                <tbody>
                  {[
                    { place: '1st Place', prize: 'R700' },
                    { place: '2nd Place', prize: 'R500' },
                    { place: '3rd Place', prize: 'R300' },
                    { place: '4th Place', prize: 'R200' },
                    { place: '5th Place', prize: '2000 V-Bucks' },
                  ].map((row) => (
                    <tr key={row.place} className="hover:bg-[var(--neon-blue)]/5">
                      <td className="p-3">{row.place}</td>
                      <td className="p-3">{row.prize}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </Section>

            <Section
              title="üéØ Scoring System"
              isCollapsed={collapsedSections.scoring}
              toggle={() => toggleSection('scoring')}
            >
              <table className="w-full bg-[var(--bg-card)] rounded-lg">
                <thead>
                  <tr className="bg-[var(--neon-blue)]/10">
                    <th className="p-3 text-left text-[var(--neon-blue)]">Placement</th>
                    <th className="p-3 text-left text-[var(--neon-blue)]">Points</th>
                  </tr>
                </thead>
                <tbody>
                  {[
                    { place: '1st', points: 20 },
                    { place: '2nd', points: 17 },
                    { place: '3rd', points: 15 },
                    { place: '4th', points: 13 },
                    { place: '5th-10th', points: 9 },
                    { place: '11th-15th', points: 5 },
                    { place: '16th-20th', points: 2 },
                  ].map((row) => (
                    <tr key={row.place} className="hover:bg-[var(--neon-blue)]/5">
                      <td className="p-3">{row.place}</td>
                      <td className="p-3">{row.points}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
              <p className="mt-4"><strong>+1 point per elimination</strong></p>
            </Section>

            <Section
              title="üö´ Rules"
              isCollapsed={collapsedSections.rules}
              toggle={() => toggleSection('rules')}
            >
              <ul className="space-y-2 text-[var(--text-secondary)]">
                <li>No teaming with other duos</li>
                <li>No exploits or glitches</li>
                <li>Must use your own account</li>
                <li>Decisions by admins are final</li>
                <li>Both players must verify in Discord to complete registration</li>
                <li><strong>Failure to follow Yunite instructions or tournament rules will result in disqualification</strong></li>
              </ul>
            </Section>

            <Section
              title="üì¢ Admin Support & Yunite Points"
              isCollapsed={collapsedSections.support}
              toggle={() => toggleSection('support')}
            >
              <p><strong>Points are tracked using the <a href="https://yunite.xyz" target="_blank" className="text-[var(--neon-blue)] hover:underline">Yunite bot</a>.</strong></p>
              <ul className="space-y-2 text-[var(--text-secondary)]">
                <li>Both players must add Yunite as a friend on Fortnite.</li>
                <li>Yunite will join your lobby automatically.</li>
                <li><strong>Make Yunite the party leader</strong> once it joins.</li>
                <li>After assigning leadership, Yunite will leave and record your match.</li>
              </ul>
              <p className="mt-4">If you need help, contact an admin on Discord:</p>
              <ul className="space-y-2 text-[var(--text-secondary)]">
                <li><strong>Shameless_FKZA</strong></li>
                <li><strong>Austin021_FKZA</strong></li>
                <li><strong>FKZA_BlackWidow</strong></li>
              </ul>
            </Section>
          </main>

          <footer className="text-center py-6 bg-[var(--bg-card)] border-t border-[var(--neon-blue)]/20 text-[var(--text-secondary)]">
            <p>FKZA Customs ¬© 2025</p>
          </footer>
        </div>
      );
    };

    const Section = ({ title, isCollapsed, toggle, children }) => (
      <section className="mb-6 bg-[var(--bg-card)] rounded-xl border border-[var(--neon-blue)]/20 neon-glow">
        <h2
          className="p-4 bg-[var(--neon-blue)]/10 text-[var(--neon-blue)] orbitron font-semibold text-xl md:text-2xl flex items-center gap-2 cursor-pointer hover:bg-[var(--neon-blue)]/20"
          onClick={toggle}
        >
          <span className={`transition-transform ${isCollapsed ? '' : 'rotate-90'}`}>‚ñ∂</span>
          <span>{title}</span>
        </h2>
        <div className={`p-4 ${isCollapsed ? 'hidden' : 'block'}`}>
          {children}
        </div>
      </section>
    );

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
